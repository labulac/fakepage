

<!doctype html>
<html lang="zh-CN">
<head>
<meta http-equiv="Page-Enter" content="revealTrans(Duration=1.0,Transition=23)">
<script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js"></script>
<script src="/js/d-toast.min.js" type="text/javascript"></script>
<script src="/js/spin-image.min.js" type="text/javascript"></script>

<link href=  "/plugins/code-theme/tomorrow-night.css" type="text/css" rel="stylesheet" />
<link rel="stylesheet" href="/plugins/github-markdown.css">
<link rel="stylesheet" href="/css/spin.min.css">

  <meta charset="UTF-8" name="viewport" content="width=device-width,initial-scale=1">
  <title>
  Chrome插件修改教程|
  
  涛之雨的小站</title>
  
    
    
      <link rel="stylesheet" href="/css/legend.css">
    
  
<meta name="generator" content="Hexo 4.2.0"></head>





<body id="body-x">
<div id="loading" style="width: 100%;height: 100%;position: fixed;background-color: rgba(0,0,0,0.8);"></div>
    <script type="text/javascript">        
        //opts 可从网站在线制作
        
  var opts = {
  innerImage: {url: '/images/logo.png', width: 100, height: 100 }, //内部图片    
  lines: 14, // The number of lines to draw
  length: 50, // The length of each line
  width: 34, // The line thickness
  radius: 84, // The radius of the inner circle
  scale: 0.85, // Scales overall size of the spinner
  corners: 1, // Corner roundness (0..1)
  color: '#05eefa', // CSS color or array of colors
  fadeColor: '', // CSS color or array of colors
  speed: 1, // Rounds per second
  rotate: 0, // The rotation offset
  animation: 'spinner-line-shrink', // The CSS animation name for the lines
  direction: 1, // 1: clockwise, -1: counterclockwise
  zIndex: 2e9, // The z-index (defaults to 2000000000)
  className: 'spinner', // The CSS class to assign to the spinner
  top: '50%', // Top position relative to parent
  left: '50%', // Left position relative to parent
  shadow: '0 0 10px', // Box-shadow for the lines
  position: 'relative', // Element positioning
            trail: 60, // 花瓣旋转时的拖影(百分比)
            hwaccel: true, //spinner 是否启用硬件加速及高速旋转      
            progress: true,      // show progress tracker
            progressTop: 0,       // offset top for progress tracker
            progressLeft: 0       // offset left for progress tracker
};
        var spinner = new Spinner(opts);
                    var target = $("#loading")[0];
                    spinner.spin(target);
window.onload=function(){
spinner.spin();
$("#loading")[0].style.display="none";
}
        
    </script>
<div id="layout-content">
  
<div id="menu-outer-x">
  <div id="menu-inner">
    
    
    <div id="site-title">
      <a href="/">涛之雨的小站</a>
    </div>
    

     
    <div>
    
      
      <a href="/">首页</a>
      
    
      
      <a href="/chaoxing">chaoxing脚本</a>
      
    
    </div>
  </div>
</div> 
  <div id="content-outer">
    <div id="content-inner">
      
      
  <article class="markdown-body">
    <h2 id="post-title">Chrome插件修改教程
      
    </h2>
    <p>目录：</p>
<div class="toc">

<!-- toc -->

<ul>
<li><a href="#zhun-bei-gong-zuo">准备工作</a><ul>
<li><a href="#xu-yao-shi-yong-de-gong-ju">需要使用的工具</a></li>
<li><a href="#cha-jian-an-zhuang-yu-ti-qu">插件安装与提取</a><ul>
<li><a href="#cong-gu-ge-shang-dian-ti-qu">从谷歌商店提取</a></li>
<li><a href="#zhi-jie-xia-zai-crx">直接下载crx</a></li>
<li><a href="#zhu-yi-shi-xiang">注意事项！！！</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#xiu-gai-jie-suo-gao-ji-gong-neng">修改–解锁高级功能</a><ul>
<li><a href="#fen-xi-qu-bie">分析区别</a></li>
<li><a href="#ding-wei-pan-duan-dai-ma-ji-xiu-gai">定位判断代码及修改</a></li>
<li><a href="#ce-shi-shi-fou-cheng-gong">测试是否成功</a></li>
</ul>
</li>
<li><a href="#xiu-gai-han-hua">修改–汉化</a><ul>
<li><a href="#fen-lei">分类</a></li>
<li><a href="#li-zi-yi-han-hua-ti-shi-yu-bing-zi-ding-yi">例子一：汉化提示语并自定义</a></li>
<li><a href="#li-zi-er-han-hua-bu-fen-she-zhi">例子二：汉化部分设置</a></li>
<li><a href="#li-zi-san-chong-fu-bu-fen-han-hua">例子三：重复部分汉化</a></li>
<li><a href="#qi-ta-han-hua-li-zi-zhan-shi">其他汉化例子展示</a></li>
</ul>
</li>
<li><a href="#xiu-gai-bu-ju">修改–布局</a><ul>
<li><a href="#gei-zuo-zhe-tian-keng">给作者填坑</a></li>
<li><a href="#qiang-po-zheng-huan-zhe">强迫症患者</a></li>
<li><a href="#qi-ta-xiu-gai-xia-gai">其他修改（瞎改）</a></li>
</ul>
</li>
<li><a href="#xiu-gai-za-xiang">修改–杂项</a></li>
<li><a href="#xiu-gai-dong-tai-diao-shi">修改–动态调试</a><ul>
<li><a href="#popup-dan-chu-ye-mian">popup（弹出页面）</a></li>
<li><a href="#zhi-ru-dao-ye-mian-de-js">植入到页面的js</a></li>
</ul>
</li>
<li><a href="#chu-xian-cuo-wu-de-chu-li-fang-fa">出现错误的处理方法</a></li>
<li><a href="#da-bao">打包</a></li>
<li><a href="#can-kao-zi-liao">参考资料</a></li>
<li><a href="#xiu-gai-yang-ben">修改样本</a></li>
</ul>
<!-- tocstop -->

</div>


<h1><a href="#zhun-bei-gong-zuo" class="header-anchor">☺</a><span id="zhun-bei-gong-zuo">准备工作</span></h1><p>因为很多人需要，而且没有在<code>吾i</code> <code>破解</code> <code>论坛</code>都没有找到<br>那就我来抛砖引玉吧。</p>
<h2><a href="#xu-yao-shi-yong-de-gong-ju" class="header-anchor">☺</a><span id="xu-yao-shi-yong-de-gong-ju">需要使用的工具</span></h2><ol>
<li>脑子。<blockquote>
<p>当然不是说大脑，是思维。<br>举个例子吧，之前有人问我，为什么把<code>支付失败</code>的<strong>字符串</strong>改成<code>支付成功</code>后，<br>只弹出成功，没有效果。。。这个问题比较深奥，我无法解释。（当时我就说我不会。）</p>
</blockquote>
</li>
<li><code>正确的</code>上网方式（非必须）<blockquote>
<p>你改插件，总不能改二手的吧。。。</p>
</blockquote>
</li>
<li><code>js</code>，<code>HTML(H5)</code>，<code>CSS</code>基础(*)<blockquote>
<p>这些很重要！巧妇难为无米之炊，万丈高楼平地起，离不开。。。<br>吾爱。<br>咳咳</p>
</blockquote>
</li>
<li>习惯用的编辑器。<blockquote>
<p>一个好的编辑器可以让你<code>事半功倍</code><br>当然理论上<code>notepad</code>也成，就是太费眼。<br>这里我推荐的两款是<code>notepad++</code>和<code>sublime</code><br>咳咳，至于前者，本来挺喜欢的（只对软件本身），后来事情发生了就果断卸载。。。<br>如果你确定满足并且想一起研究的话，就继续吧。</p>
</blockquote>
</li>
</ol>
<p>正式开始。</p>
<h2><a href="#cha-jian-an-zhuang-yu-ti-qu" class="header-anchor">☺</a><span id="cha-jian-an-zhuang-yu-ti-qu">插件安装与提取</span></h2><h3><a href="#cong-gu-ge-shang-dian-ti-qu" class="header-anchor">☺</a><span id="cong-gu-ge-shang-dian-ti-qu">从谷歌商店提取</span></h3><p>因为我是Chrome的用户（曾经的某6某忠实粉丝hhh劝退）<br>理论上<code>Chromium</code>内核的浏览器插件修改起来应该都差不多吧。</p>
<p>目标：<code>Octotree</code><br>官网：<a href="https://octotree.io" target="_blank" rel="noopener"><code>octotree.io</code></a><br><code>Chrome</code>插件下载地址（谷歌商店）：<a href="https://chrome.google.com/webstore/detail/octotree/bkhaagjahfmjljalopjnoealnfndnagc" target="_blank" rel="noopener">链接太长。。点我访问</a></p>
<h4><a href="#xia-zai-amp-an-zhuang" class="header-anchor">☺</a><span id="xia-zai-amp-an-zhuang">下载&amp;安装</span></h4><p>谷歌商店一键安装。</p>
<p><img src="./1594173504128.png" alt="Alt text"></p>
<p>安装</p>
<p><img src="./1594173512123.png" alt="Alt text"></p>
<p>安装完成（感觉这几张都是废图。。。）</p>
<p><img src="./1594173518640.png" alt="Alt text"></p>
<h4><a href="#ti-qu-cha-jian-an-zhuang-bao" class="header-anchor">☺</a><span id="ti-qu-cha-jian-an-zhuang-bao">提取插件安装包</span></h4><p><code>chrome://extensions/</code>管理页面中，查看刚才安装后的插件的<code>ID</code></p>
<p><img src="./1594173528497.png" alt="Alt text"></p>
<p>如图所示，本例的<code>ID</code>是<code>bkhaagjahfmjljalopjnoealnfndnagc</code>（只需要看首尾就足够了。）</p>
<p>好吧，我不知道<code>Chrome</code>下载的<code>crx</code>文件。。。放在哪里（可能是安装后自动删掉了？）<br>有知道的朋友可以回复告知一下。<br>访问<code>chrome://version</code></p>
<p><img src="./1594173597870.png" alt="Alt text"></p>
<p>找到<code>个人资料路径</code>，计算机里打开路径。<br>插件所在文件夹在Chrome资料文件夹下的<code>Extensions</code>文件夹</p>
<p>比如本例：<br>看首几位为：<code>bkha</code></p>
<p><img src="./1594173564306.png" alt="Alt text"></p>
<p>找到插件文件夹了。<br>打开该文件夹，</p>
<p><img src="./1594173585400.png" alt="Alt text"></p>
<p>里面这个版本号所在的文件夹才是真正的插件文件夹（插件是需要打包才能成为<code>crx</code>文件的，本质上就是有经过签名压缩文件，后面会说怎么签名打包）</p>
<p>复制这个版本号文件夹出来。</p>
<h3><a href="#zhi-jie-xia-zai-crx" class="header-anchor">☺</a><span id="zhi-jie-xia-zai-crx">直接下载crx</span></h3><p>有些浏览器或某些插件可以直接下载到<code>crx</code>或<code>未封装的插件</code></p>
<p>下载后直接解压就好。</p>
<h3><a href="#zhu-yi-shi-xiang" class="header-anchor">☺</a><span id="zhu-yi-shi-xiang">注意事项！！！</span></h3><p><strong>注意！</strong>和爆破exe一样！最重要的就是勤备份！<br>注意！<strong>和爆破exe一样！</strong>最重要的就是勤备份！<br>注意！和爆破exe一样！<strong>最重要的就是勤备份！</strong><br>不然一失足成千古恨。。。</p>
<h1><a href="#xiu-gai-jie-suo-gao-ji-gong-neng" class="header-anchor">☺</a><span id="xiu-gai-jie-suo-gao-ji-gong-neng">修改–解锁高级功能</span></h1><p>获取到目标文件的解压文件就可以开始着手了<br>推荐的参考</p>
<h2><a href="#fen-xi-qu-bie" class="header-anchor">☺</a><span id="fen-xi-qu-bie">分析区别</span></h2><p>破解功能自然是因为功能上有差异。找到这个差异。<br>比如</p>
<p><img src="./1594173612185.png" alt="Alt text"></p>
<blockquote>
<p>试用会员过期提示升级的提示（源码里称之为<code>广告</code>）</p>
</blockquote>
<p>或是</p>
<p><img src="./1594173625818.png" alt="Alt text"></p>
<blockquote>
<p>剩余会员试用时间的显示</p>
</blockquote>
<p>亦或是</p>
<p><img src="./1594173641634.png" alt="Alt text"></p>
<blockquote>
<p>仅会员可以使用的提示。<br>当然还有很多情况，比如只有会员才会显示的按钮（官方示意图可能会有关键词）</p>
</blockquote>
<h2><a href="#ding-wei-pan-duan-dai-ma-ji-xiu-gai" class="header-anchor">☺</a><span id="ding-wei-pan-duan-dai-ma-ji-xiu-gai">定位判断代码及修改</span></h2><p>推荐<code>notepad++</code>和<code>sublime</code>之一的原因就是他们支持文件夹中搜索关键词（好吧，everything好像也可以，不过那不是编辑器。。）</p>
<p>例如<code>试用会员还剩多长时间过期</code>的提示<br>关键词：<code>remained</code>，文件夹内搜索，发现只有<code>content.js</code>里有。</p>
<p><img src="./1594173646830.png" alt="Alt text"></p>
<p>打开继续搜索</p>
<p><img src="./1594173651384.png" alt="Alt text"></p>
<p>发现只有一处（巧了，看一下前后文，应该是的<code>day(s)</code>也有了）<br>向前找判断<br>这里因为打包的时候压缩了，建议在新窗口美化一下（当然也可以直接修改。或是直接保存美化后的代码。个人喜欢原汁原味）<br>当然有些lj网站美化后的代码会出现问题。。比如</p>
<p><img src="./1594173656795.png" alt="Alt text"></p>
<p>这样。<br>因为瞎换行，把人家的字符串给拆了。。。</p>
<p><img src="./1594173660598.png" alt="Alt text"></p>
<p>格式化后看起来就很（相对）清爽了。<br>一个方法，里面是判断。<br>根据判断找到<br><code>this._state === t.SUBSCRIPTION_OK</code><br>此处其实可以使用全局替换，把<code>this._state === t.SUBSCRIPTION_OK</code>改成<code>true</code>。<br>此处选择方法分析，尽可能少改动。<br>搜索调用（这个没有混淆，很方便找。如果混淆了一般都会动态调试，下面有动态调试的方法，可以参考一下）</p>
<p><img src="./1594173667243.png" alt="Alt text"></p>
<p>这里一样，因为很轻松就能知道<code>SUBSCRIPTION_OK</code>、<code>SUBSCRIPTION_EXPIRED</code>、<code>TRIAL_EXPIRED</code>是什么意思，直接改就行了。如果混淆了，需要动态调试。</p>
<p>搜索后得知<code>_getTrialRemainingDays</code>只有一处调用，因此直接赋值就好，不会有问题。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const a &#x3D; this._getTrialRemainingDays(_);</span><br></pre></td></tr></table></figure>
<p>改成</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const a &#x3D; 0;&#x2F;&#x2F;此处改成0（试用剩余0天,试用期间有购买Pro的广告）</span><br></pre></td></tr></table></figure>
<p>接着是改<code>this._state</code>，因为多次调用该代码，因此溯源。找<code>this._state</code>赋值的位置。<br>就在上面一行（格式化后的）</p>
<p><img src="./1594173674635.png" alt="Alt text"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">async _verifySubscription(e) &#123;</span><br><span class="line">const i &#x3D; e || await extStore.get(a),</span><br><span class="line">    o &#x3D; this._decodeTokenPayload(i);</span><br><span class="line">let s &#x3D; t.UNAUTHENTICATED;</span><br><span class="line">if (o) &#123;</span><br><span class="line">    const &#123; expiredAt: e, subscriptionStatus: a, trialDays: i, createdAt: n &#125; &#x3D; o;</span><br><span class="line">    if (Date.now() &lt; e)</span><br><span class="line">        if (a) switch (a) &#123;</span><br><span class="line">            case &quot;EXPIRED&quot;:</span><br><span class="line">                s &#x3D; t.SUBSCRIPTION_EXPIRED;</span><br><span class="line">                break;</span><br><span class="line">            case &quot;ACTIVE&quot;:</span><br><span class="line">            case &quot;CANCELLED&quot;:</span><br><span class="line">                s &#x3D; t.SUBSCRIPTION_OK</span><br><span class="line">        &#125; else s &#x3D; Math.ceil((Date.now() - n) &#x2F; 864e5) &lt;&#x3D; i ? t.SUBSCRIPTION_OK : t.TRIAL_EXPIRED</span><br><span class="line">&#125;</span><br><span class="line">return s &#x3D;&#x3D;&#x3D; t.UNAUTHENTICATED &amp;&amp; await extStore.remove(a), s</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>老规矩，可以把判断改掉。<br>我这里把除了<code>SUBSCRIPTION_OK</code>的赋值全都改了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">async _verifySubscription(e) &#123;</span><br><span class="line">const i &#x3D; e || await extStore.get(a),</span><br><span class="line">    o &#x3D; this._decodeTokenPayload(i);</span><br><span class="line">let s &#x3D; t.UNAUTHENTICATED;</span><br><span class="line">if (o) &#123;</span><br><span class="line">    const &#123; expiredAt: e, subscriptionStatus: a, trialDays: i, createdAt: n &#125; &#x3D; o;</span><br><span class="line">    if (Date.now() &lt; e)</span><br><span class="line">        if (a) switch (a) &#123;</span><br><span class="line">            case &quot;EXPIRED&quot;:&#x2F;&#x2F;把下面两行过期的跳转删掉</span><br><span class="line">            case &quot;ACTIVE&quot;:</span><br><span class="line">            case &quot;CANCELLED&quot;:</span><br><span class="line">                s &#x3D; t.SUBSCRIPTION_OK</span><br><span class="line">        &#125; else s &#x3D; Math.ceil((Date.now() - n) &#x2F; 864e5) &lt;&#x3D; i ? t.SUBSCRIPTION_OK : t.SUBSCRIPTION_OK&#x2F;&#x2F;这里把判断前后改成一样的就成</span><br><span class="line">&#125;</span><br><span class="line">return s &#x3D;&#x3D;&#x3D; t.UNAUTHENTICATED &amp;&amp; await extStore.remove(a), s</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当然全都删掉然后改成</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">return t.SUBSCRIPTION_OK</span><br></pre></td></tr></table></figure>

<p>也是可以的。<br>我个人习惯基于原代码修改。</p>
<h2><a href="#ce-shi-shi-fou-cheng-gong" class="header-anchor">☺</a><span id="ce-shi-shi-fou-cheng-gong">测试是否成功</span></h2><p>把上面的代码在原文件里对应修改。<br>保存后点击</p>
<p><img src="./1594173693089.png" alt="Alt text"></p>
<p>重新加载插件就修改完成了。</p>
<blockquote>
<p>这里是成功破解了高级功能。<br>如果不成功返回继续<br>如果报错见<code>出现错误的处理方法</code></p>
</blockquote>
<h1><a href="#xiu-gai-han-hua" class="header-anchor">☺</a><span id="xiu-gai-han-hua">修改–汉化</span></h1><h2><a href="#fen-lei" class="header-anchor">☺</a><span id="fen-lei">分类</span></h2><p>上一次修改的时候对代码进行了汉化，这次也不例外。<br>汉化的情况有多重。</p>
<ol>
<li>语言是写死的（类似这次，是只有单一语言的）</li>
<li>有多重语言包可以选择，就是没有中国的（差评）</li>
<li>有<code>中文</code>的选项，但是只有部分是汉语，而且还有好多是错的。</li>
</ol>
<p>一般来说，<br><code>1</code>是因为没做多语言配置，在<code>js</code>里直接修改就好<br><code>2</code>相对来说好改一点，找到语言包，修改就行（一般是<code>json</code>文件或是<code>js</code>内的<code>json</code>，且多为谷歌语言包，在插件目录下的<code>_locales</code>文件夹下，有对应语言的语言包）<br><code>3</code>一般和<code>2</code>情况类似，补充翻译即可。（推荐<code>BCompare 4</code>，对比很方便，其他某插件的示意图如下图）</p>
<p><img src="./1594173716958.png" alt="Alt text"></p>
<p>本插件是最不方便修改的写死在js里的类型。一般需要所见即需译，就是看到需要翻译的，就去翻译，而且翻译的过程最好从特征词句到一般词语。<br>有强烈特征的一句话或是一个不常见的单词先翻译。比如<code>settings</code>，一般只要有设置的插件里会反复出现。这就不好定位了。</p>
<h2><a href="#li-zi-yi-han-hua-ti-shi-yu-bing-zi-ding-yi" class="header-anchor">☺</a><span id="li-zi-yi-han-hua-ti-shi-yu-bing-zi-ding-yi">例子一：汉化提示语并自定义</span></h2><p>举个例子</p>
<p><img src="./1594173723968.png" alt="Alt text"></p>
<p>第一次安装完后打开会有如下提示，一句话，就很方便搜索到</p>
<p><img src="./1594173727366.png" alt="Alt text"></p>
<p>那就直接修改好了。注意不要修改到关键词，或是其他代码，或是单双引号，亦或是<code>%1</code>、<code>$1</code>、<code>{1}</code>这类的替换字符。</p>
<p>翻译替换进去就行，这里我选择<a href="https://translate.google.cn/" target="_blank" rel="noopener">谷歌翻译</a>，可能是日常习惯用谷歌搜索吧，而且比较喜欢<code>Material Design</code>风格吧。</p>
<p><img src="./1594173733847.png" alt="Alt text"></p>
<p>虽然都是简单的句子，我还是选择机译+校准。因为打字没有复制粘贴快（<strong>所以码教程是最痛苦的，不接受反驳</strong>）</p>
<p>当然，你也可以随手扔一个<code>“版权”</code>之类的。。。虽然破解版只是技术的产物，是没有版权可验的。</p>
<p>修改完：</p>
<p><img src="./1594173740108.png" alt="Alt text"></p>
<p>效果图：</p>
<p><img src="./1594173747813.png" alt="Alt text"></p>
<h2><a href="#li-zi-er-han-hua-bu-fen-she-zhi" class="header-anchor">☺</a><span id="li-zi-er-han-hua-bu-fen-she-zhi">例子二：汉化部分设置</span></h2><p>再举个例子</p>
<p><img src="./1594173762430.png" alt="Alt text"></p>
<p>因为我刚才卸载了，提示我要登录。<br>改之，老规矩，搜索上面的关键词<code>unlock:</code></p>
<p><img src="./1594173769681.png" alt="Alt text"></p>
<p>搜索后发现并没有解锁的列表，在<code>${s}</code>和<code>${n}</code>里。</p>
<p>向上翻一下，找到了该列表。</p>
<p><img src="./1594173775804.png" alt="Alt text"></p>
<p>既然是破解版，那就可以随心所欲的翻译了。。。比如我是这么做的</p>
<p><img src="./1594173818199.png" alt="Alt text"></p>
<p>对应的代码部分：</p>
<p><img src="./1594173858503.png" alt="Alt text"></p>
<h2><a href="#li-zi-san-chong-fu-bu-fen-han-hua" class="header-anchor">☺</a><span id="li-zi-san-chong-fu-bu-fen-han-hua">例子三：重复部分汉化</span></h2><p>汉化<code>Settings</code>设置的标题部分。有很多搜索项<br><img src="./1594173826716.png" alt="Alt text"></p>
<p>可以</p>
<ol>
<li><p>勾选<code>Aa</code>区分大小写。</p>
</li>
<li><p>使用正则表达式，排除前后没有的字符比如使用</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\WSettings\W</span><br></pre></td></tr></table></figure>
<p> 匹配前后都是非字母和数字的<code>Settings</code><br> <img src="./1594173836476.png" alt="Alt text"></p>
<p> (这9处除了一个夜间模式匹配字符的正则表达式，其余的都是要汉化的)</p>
</li>
<li><p>审查元素，找到前后文（包括<code>类名</code>、<code>ID</code>）<br> 比如<br> <img src="./1594173842727.png" alt="Alt text"></p>
<p> 很方便就可以精准定位到汉化的位置。</p>
<p> <img src="./1594173848131.png" alt="Alt text"></p>
</li>
</ol>
<h2><a href="#qi-ta-han-hua-li-zi-zhan-shi" class="header-anchor">☺</a><span id="qi-ta-han-hua-li-zi-zhan-shi">其他汉化例子展示</span></h2><p>请下载插件（同时提供了修改后的和未修改的版本）</p>
<h1><a href="#xiu-gai-bu-ju" class="header-anchor">☺</a><span id="xiu-gai-bu-ju">修改–布局</span></h1><p>布局一般修改是<code>CSS</code>，<code>JS</code>甚至<code>HTML</code>，因此要都有所了解。</p>
<h2><a href="#gei-zuo-zhe-tian-keng" class="header-anchor">☺</a><span id="gei-zuo-zhe-tian-keng">给作者填坑</span></h2><p>老bug了。。无法滚动的bug修复了，但是界面还是不正常（左侧多余，右侧溢出）</p>
<p><img src="./1594173867705.png" alt="Alt text"></p>
<p>在<code>Chrome</code>的控制台里一通摸索(瞎改)，</p>
<blockquote>
<p>一般为<code>CSS</code>或<code>CLASS</code>的修改居多，需要有<code>HTML</code>、<code>CSS</code>等基础</p>
</blockquote>
<p>发现是<br><img src="./1594173879599.png" alt="Alt text"></p>
<p>把<code>transform</code>和<code>left</code>属性强制删除，设置就行（<code>unset</code>）<br>在下面的class里找到设置右侧属性的类（本例中见下图）<br><img src="./1594173884778.png" alt="Alt text"></p>
<p>因为是<code>!important</code>强制属性，所以只需要改一个就行。<br>修改部分如图所示：<br><img src="./1594173891562.png" alt="Alt text"></p>
<blockquote>
<p>注：</p>
<ol>
<li>改法不唯一，只要能实现目的，且简洁方便快捷实用，就是好方法。</li>
<li>本方法因为没有使用<code>transform</code>属性，移动动画会丢失。<br>不想加<code>animation</code>动画，又没想到更好的方法。。。<br>凑活用吧，反正主要不是看动画的。</li>
</ol>
</blockquote>
<h2><a href="#qiang-po-zheng-huan-zhe" class="header-anchor">☺</a><span id="qiang-po-zheng-huan-zhe">强迫症患者</span></h2><p><img src="./1594173898285.png" alt="Alt text"></p>
<p><code>tip</code>竟然出现在左边。。。<br>好难受看我改到下（上）面<br>分析<code>class</code>，<code>tooltipped-w</code>是左边显示，因此猜测<code>w</code>是指西边。</p>
<p><img src="./1594173960295.png" alt="Alt text"></p>
<p>观察到上面<code>Git</code>部分有想要的样式，<br>同理，炮制出<code>tooltipped-sw</code>（西南），改动前后的对比</p>
<p><img src="./1594173915326.png" alt="Alt text"></p>
<blockquote>
<p>注：<code>Chrome</code>在标签上右键<code>Force State</code>可以设置当前状态</p>
</blockquote>
<p>改完代码发现在右侧的时候显示正常，但是左侧的时候就变了。<br>查看代码发现因为有页面方向的变换，对<code>class</code>进行了动态改变。<br>改<code>js</code>代码吧。给每一个加上单独的类（这里我使用的是<code>tao</code>）</p>
<p><img src="./1594173930433.png" alt="Alt text"></p>
<p>效果（注：图经过处理，为了方便看效果，部分间距增加了）<br><img src="./1594173922425.png" alt="Alt text"></p>
<p>左右均正常。</p>
<h2><a href="#qi-ta-xiu-gai-xia-gai" class="header-anchor">☺</a><span id="qi-ta-xiu-gai-xia-gai">其他修改（瞎改）</span></h2><p><img src="./1594173951406.png" alt="Alt text"></p>
<p>咳咳，反正<code>html</code>、<code>css</code>或<code>js</code>呗。<br>看着改好了。。。</p>
<h1><a href="#xiu-gai-za-xiang" class="header-anchor">☺</a><span id="xiu-gai-za-xiang">修改–杂项</span></h1><p>还有一些乱七八糟的东西可以修改，具体可以参考附录中的第二个教程<br>比如右键，第一个是官网。<br>可以点击后弹一个咱们的<code>唔愛论坛</code>官网，改改作者、简介啥的<br><img src="./1594174031309.png" alt="Alt text"></p>
<p><strong>注！上述截图因为方便说名，仅把更新链接删掉了。真正操作的时候请删除</strong></p>
<p>或是卸载后再弹一下<code>5爱</code>的官网（下图第一个框）<br>当然也可以像我上个版本一样，第一次安装的时候弹一下。<br><img src="./1594174046561.png" alt="Alt text"></p>
<p>效果：</p>
<blockquote>
<p>第一次安装有弹窗：<br><img src="./1594174053646.png" alt="Alt text"></p>
</blockquote>
<blockquote>
<p>同时点击确定后有吾爱网站弹出<br><img src="./1594174061713.png" alt="Alt text"></p>
</blockquote>
<h1><a href="#xiu-gai-dong-tai-diao-shi" class="header-anchor">☺</a><span id="xiu-gai-dong-tai-diao-shi">修改–动态调试</span></h1><p>动态调试是最方便找到出问题的位置以及原因的办法（虽然不一定能想到怎么解决。比如下图）。</p>
<p><img src="./1594173803832.png" alt="Alt text"></p>
<p>亦或是代码被混淆的很厉害，又抽取了结构，平流抽象化了（AST）</p>
<blockquote>
<p>注：AST又被称为js预编译，可以参考<a href="https://blog.csdn.net/huangpb123/article/details/84799198" target="_blank" rel="noopener">这里</a>的介绍</p>
</blockquote>
<p>还是以<code>Octotree</code>为例<br>假如我故意（一不小心）出了一个未知错误。<br><img src="./1594173977195.png" alt="Alt text"></p>
<p>插件的错误也十分“委婉”，而且因为压缩了，不方便看错误位置。<br>动态调试吧。<br>这里要分情况查看。</p>
<h2><a href="#popup-dan-chu-ye-mian" class="header-anchor">☺</a><span id="popup-dan-chu-ye-mian">popup（弹出页面）</span></h2><p>就是点击插件的按钮，会有窗口弹出的。类似于下图的<code>ADblock插件</code><br><img src="./1594174017522.png" alt="Alt text"></p>
<p>插件上<code>右键</code>-<code>审查弹出窗口</code>-<code>(格式化)下断点</code>-<code>重新加载</code></p>
<blockquote>
<p>注：重新加载可以在<code>console</code>里输入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">location.reload(true)</span><br></pre></td></tr></table></figure>
<p>重新加载。<br><img src="./1594173998360.png" alt="Alt text"></p>
</blockquote>
<h2><a href="#zhi-ru-dao-ye-mian-de-js" class="header-anchor">☺</a><span id="zhi-ru-dao-ye-mian-de-js">植入到页面的js</span></h2><p>可以直接在<code>console</code>-<code>Content Script</code>-<code>页面的位置（如果有iframe的话）</code>-<code>插件名</code>中格式化，下断点等等。<br><img src="./1594174009237.png" alt="Alt text"></p>
<blockquote>
<p>注：推荐一个我刚发现的功能（可能有朋友早就知道了了吧。。）<br>在上图蓝色箭头所示的方框的位置，是异常前下断点，<br>系统会在出现异常并且没有被捕捉的地方，在报错前断下。堆栈，数据都保存着，而且有报错的信息，可以方便调试。</p>
</blockquote>
<h1><a href="#chu-xian-cuo-wu-de-chu-li-fang-fa" class="header-anchor">☺</a><span id="chu-xian-cuo-wu-de-chu-li-fang-fa">出现错误的处理方法</span></h1><p><img src="./1594174105263.png" alt="Alt text"></p>
<p>最简单的办法就是：</p>
<blockquote>
<p>一直撤销到不报错为止，然后重做。<br>如果不行的话，请退回到备份版本。</p>
</blockquote>
<p>如果重复好几次，还是感觉没问题，就需要动态调试了（参上文）。</p>
<h1><a href="#da-bao" class="header-anchor">☺</a><span id="da-bao">打包</span></h1><p>该改的都改完了，该填的坑也都填好了。<br>需要打包发布了（如果有账号的话）<br>点击上方的“<code>打包扩展程序</code>”，输入扩展所在的文件夹<br>点击<code>打包扩展程序</code>即可。<br>至于<code>私钥</code>如果你不是第一次打包，上一次打包后会自动生成一个私钥。你可以用这个私钥重新打包（本质就类似安卓的签名）<br><img src="./1594172900750.png" alt="Alt text"></p>
<blockquote>
<p>补充：</p>
<ol>
<li>每个私钥都标志这一个独立的插件，如果不同的插件用同一个私钥签名，会导致覆盖。（惨痛教训）</li>
<li>因为Chrome的特性，无法直接安装没有在谷歌商店中发行的插件（除非签名经过官方许可，并且有第三方进行安装，比如下面的区别示意图）<br><img src="./1594172950061.png" alt="Alt text"></li>
</ol>
</blockquote>
<p>如果是分享<code>zip</code>版未打包的插件，推荐先打包后再重命名。<br>这样可以保证插件数据不会丢失<br>更新的时候，因为有<code>key</code>系统会认为是在更新插件，不会导致多个版本共存<br>（5555我才知道，所以现在。。）<br><img src="./1594173380191.png" alt="Alt text"><br>新版本旧版本共存了。。。也就是说旧版本的设置需要手动转移到新版本（气哭）</p>
<h1><a href="#can-kao-zi-liao" class="header-anchor">☺</a><span id="can-kao-zi-liao">参考资料</span></h1><p>有问题或是遇到奇怪的<code>API</code>可以查阅。</p>
<table>
<thead>
<tr>
<th align="center">内容</th>
<th align="center">链接</th>
<th align="center">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="center">GitHub翻译版</td>
<td align="center"><a href="https://github.com/facert/chrome-extension-guide" target="_blank" rel="noopener">点我</a></td>
<td align="center">咳咳，不一定是最新的。<br>至少比英文原版方便吧</td>
</tr>
<tr>
<td align="center">某网站分享的经验和教程</td>
<td align="center"><a href="https://huajiakeji.com/dev/2018-11/1628.html" target="_blank" rel="noopener">点我</a></td>
<td align="center">偏实战吧，比较详细<br>（虽然是转的，但是原作者图片都没了）</td>
</tr>
<tr>
<td align="center">图灵的图书版</td>
<td align="center"><a href="http://www.ituring.com.cn/book/1421" target="_blank" rel="noopener">点我</a></td>
<td align="center">emmm没啥特别的</td>
</tr>
<tr>
<td align="center">官方教程</td>
<td align="center"><a href="https://developer.chrome.com/extensions" target="_blank" rel="noopener">点我</a></td>
<td align="center">最权威的官方教程<br>（纯英语、<code>正确的上网</code>方式警告）</td>
</tr>
<tr>
<td align="center">360汉化版(超级旧的版本)</td>
<td align="center"><a href="http://open.chrome.360.cn/html/dev_doc.html" target="_blank" rel="noopener">点我</a></td>
<td align="center">旧版本，很多图都挂了</td>
</tr>
</tbody></table>
<h1><a href="#xiu-gai-yang-ben" class="header-anchor">☺</a><span id="xiu-gai-yang-ben">修改样本</span></h1><p>原<code>crx</code></p>
<blockquote>
<p><code>Chrome</code>插件下载地址（谷歌商店）：<br><a href="https://chrome.google.com/webstore/detail/octotree/bkhaagjahfmjljalopjnoealnfndnagc" target="_blank" rel="noopener">链接太长。。点我访问</a></p>
</blockquote>
<p>下载：</p>
<p>云盘：<br>189云盘：</p>
<blockquote>
<p><a href="https://cloud.189.cn/t/r2MJ3yaMVV3e" target="_blank" rel="noopener">https://cloud.189.cn/t/r2MJ3yaMVV3e</a><br>访问码：03ts<br>【原包】即为未修改版本，后缀改成zip即可<br>【样品】即为修改后的版本，后缀改成zip即可<br>【教程】为PDF教程，后缀改成pdf即可<br>【crx】为修改打包后的crx样本，后缀改成crx即可</p>
</blockquote>
<p>蓝奏云：</p>
<blockquote>
<p>样品：<br><a href="https://www.lanzoux.com/ihR3eef0yyh" target="_blank" rel="noopener">https://www.lanzoux.com/ihR3eef0yyh</a><br>密码:ezpf</p>
<p>原包（zip）<br><a href="https://www.lanzoux.com/itEFfef0z3c" target="_blank" rel="noopener">https://www.lanzoux.com/itEFfef0z3c</a><br>密码:b0ip</p>
<p>本教程PDF<br><a href="https://www.lanzoux.com/iOkeHef0zti" target="_blank" rel="noopener">https://www.lanzoux.com/iOkeHef0zti</a><br>密码:c0cb</p>
<p>CRX版样品<br><a href="https://www.lanzoux.com/iAl1fef1c8f" target="_blank" rel="noopener">https://www.lanzoux.com/iAl1fef1c8f</a><br>密码:hhy6</p>
</blockquote>
<blockquote>
<p>小站：<br>样品：<a href="./Octotree_cracked%20by%20%e5%90%be%e7%88%b1%e7%a0%b4%e8%a7%a3%ef%bc%9a%e6%b6%9b%e4%b9%8b%e9%9b%a8V5.2.1_0.zip">Octotree_cracked by 吾爱破解：涛之雨V5.2.1_0.zip</a><br>CRX版样品：<a href="./Octotree_cracked%20by%20%e5%90%be%e7%88%b1%e7%a0%b4%e8%a7%a3%ef%bc%9a%e6%b6%9b%e4%b9%8b%e9%9b%a85.2.1.crx">Octotree_cracked by 吾爱破解：涛之雨V5.2.1.crx</a><br>原版zip：<a href="./RAW5.2.1_0.zip">Octotree</a><br>本教程PDF（最后的下载部分有改动，未同步）<a href="./download.pdf">download.pdf</a></p>
</blockquote>

  </article>

  

    </div>
  </div>
</div>




<div id="bottom-outer">
  
  <div id="bottom-inner">
    涛之雨 
    ©2020 |Powered by  
    <a href="http://hexo.io" target="_blank">Hexo</a>
  </div>
    
    
     


  
  
    <script src="/js/legend.js"></script>
  



<script>
$(window).on('load', function(){
   $('pre').addClass('prettyprint').attr('style', 'overflow:auto;');
   prettyPrint();
 });
</script>
</body>
</html>




<div id="social-about">




</div>